<!DOCTYPE html>
<html lang="en" p-scope="show_cats = false; cats = ['Ralph', 'Betsy', 'Drago']; add_cat = ''; emoji = false; coolname = name + 'cool';">
    <head>
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50'/></svg>">
        <script src="/pattr.js" defer></script>
        <script id="p-root-data" type="application/json">
            {
                "title": "This is <strong><em>Pattr</em></strong><iframe src='https://plenti.co' />. And it's really cool!",
                "name": "Bob",
                "count": 2
            }
        </script>
    </head>
    <body>
        <h1 p-html:allow.strong.em:trim.18="title"></h1>
        <hr>
        <div p-attr="{'data-name': name + 'woah'}" p-attr:number="count * 3">Parent Component:</div>
        <button p-on:click="count++">+</button>
        <button p-on:click="count--">-</button>
        <input type="number" p-model="count" />
        <div p-text:trim.25="`${name} can count to: ${count}`"></div>
        <div id="class-test" p-class="{'active': count > 2, 'highlight': count === 2, 'warning': count < 2}">
            <span p-show="count > 2">Greater than 2</span>
            <span p-show="count === 2">Exactly 2</span>
            <span p-show="count < 2">Less than 2</span>
        </div>
        <div 
            id="pre-scope-box"
            p-show:pre-scope="count < 4" 
            p-scope="count = count * 2"
            style="padding: 3px; margin: 10px 0; background: #e0f7fa; border: 1px solid #00acc1;"
        >
            <div>Only show when parent count < 4 (checked before scoping)</div>
            <div>Inside scope (doubled) count = <span p-text="count"></span></div>
        </div>
        <input type="text" p-model="name" p-on:focus="emoji = true" p-on:blur="emoji = false" />
        <span p-show="emoji">ðŸ¤“</span>
        <div id="coolname">
            <span>Top-level scope (name + 'cool';):</span>
            <span p-text="coolname"></span>
        </div>
        <hr>
        <section p-scope="count = count + 1; count = count * 2;">
            <div>Sequential Scope (count +1 *2):</div>
            <div p-text="`New count to: ${count}`"></div>
            <button p-on:click="count++">+</button>
            <button p-on:click="count--">-</button>
            <hr>
        </section>
        <section p-scope="count = count * 2; name = name + 'o';">
            <div>Child Component (count *2):</div>
            <div p-text="`${name} can count to: ${count}`"></div>
            <button p-on:click="count++">+</button>
            <button p-on:click="count--">-</button>
            <input type="text" p-model="name" />
            <hr>
            <section p-scope="count = count + 1; name = name + ' Burns';">
                <div>Grandchild Component (child count +1):</div>
                <div p-text="`${name} can count to: ${count}`"></div>
                <button p-on:click="count++">+</button>
                <button p-on:click="count--">-</button>
                <input type="text" p-model="name" />
            </section>
        </section>
        <hr>
        <button p-on:click="show_cats = !show_cats">
            <span p-show="!show_cats">Show cats</span>
            <span p-show="show_cats">Hide cats</span>
        </button>
        <div class="cats-list" p-style="show_cats ? 'max-height: 300px' : 'max-height: 0'">
            <h3>Cats</h3>
            <template p-for="[i, cat] of cats.entries()">
                <div>
                    <div p-text="cat"></div>
                    <button p-on:click="cats = cats.filter(c => c !== cat);">X</button>
                    <button p-on:click="cats[i] = cat + '!'">!</button>
                    <button p-on:click="cats[i] = cat + cat.slice(-1)">+</button>
                    <button p-on:click="cats[i] = cat.slice(0, -1)">-</button>
                    <template p-for="l of cat">
                        <button
                            p-text="l"
                            p-on:click="cats[i] = cat + l"
                        ></button>
                    </template>
                </div>
            </template>
            <div p-for-key="0">Ralph</div>
            <div p-for-key="1">Betsy</div>
            <div p-for-key="2">Drago</div>
            <div p-for-key="3">Big</div>
            <input placeholder="Cat name" p-model="add_cat" />
            <button p-on:click="cats = [...cats, add_cat]; add_cat = '';">Add Cat</button>
        </div>
        <style>
            .cats-list {
                overflow: hidden;
                transition: max-height 0.5s ease-out;
            }
            .highlight {
                color: green;
            }
            .warning {
                color: red;
            }
            .active {
                color: blue;
            }
        </style>
    </body>
</html>
